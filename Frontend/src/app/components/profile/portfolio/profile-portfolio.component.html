<section class="card">
  <div class="card-header">
    <h2 class="card-title">Portfolio</h2>
    <button class="view-all-btn" *ngIf="portfolio.length > 0" (click)="openGallery()">View All</button>
  </div>

  <!-- Has images -->
  <div class="portfolio-grid" *ngIf="portfolio.length > 0">
    <div class="portfolio-item" *ngFor="let item of portfolio.slice(0, 3)">
      <img [src]="item.image_url" [alt]="item.caption || 'Portfolio'" class="portfolio-image" />
    </div>
  </div>

  <!-- Empty state for owner -->
  <div class="empty-state" *ngIf="portfolio.length === 0 && isOwner">
    <div class="empty-icon">
      <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#94a3b8" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
        <circle cx="8.5" cy="8.5" r="1.5"/>
        <polyline points="21 15 16 10 5 21"/>
      </svg>
    </div>
    <p class="empty-text">Upload Your Images!</p>
    <button class="upload-btn" (click)="triggerUpload()">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
        <polyline points="17 8 12 3 7 8"/>
        <line x1="12" y1="3" x2="12" y2="15"/>
      </svg>
      Upload from Computer
    </button>
  </div>

  <!-- Empty state for visitor -->
  <p class="empty-visitor" *ngIf="portfolio.length === 0 && !isOwner">No portfolio images yet.</p>

  <!-- Gallery Modal -->
  <div class="gallery-overlay" *ngIf="showGallery" (click)="closeGallery()">
    <div class="gallery-modal" (click)="$event.stopPropagation()">
      <div class="gallery-header">
        <h2>Portfolio Gallery</h2>
        <div class="gallery-actions">
          <button class="upload-btn-sm" *ngIf="isOwner" (click)="triggerUpload()">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
              <polyline points="17 8 12 3 7 8"/>
              <line x1="12" y1="3" x2="12" y2="15"/>
            </svg>
            Upload
          </button>
          <button class="close-btn" (click)="closeGallery()">âœ•</button>
        </div>
      </div>
      <div class="gallery-grid">
        <div class="gallery-item" *ngFor="let item of portfolio">
          <img [src]="item.image_url" [alt]="item.caption || 'Portfolio'" />
          <span class="gallery-caption" *ngIf="item.caption">{{ item.caption }}</span>
        </div>
      </div>
    </div>
  </div>

  <div class="uploading-indicator" *ngIf="uploading">Uploading...</div>
</section>


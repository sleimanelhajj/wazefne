<div class="profile-page">
  <app-top-bar></app-top-bar>

  <div class="profile-shell" *ngIf="!loading && user">
    <div class="profile-banner-wrapper">
      <app-profile-banner
        [user]="user"
        [isOwner]="isOwner"
        (profileUpdated)="onProfileUpdated()"
      ></app-profile-banner>
    </div>

    <div class="profile-content-grid">
      <div class="profile-main-column">
        <app-profile-about [aboutMe]="user.about_me"></app-profile-about>
        <app-profile-skills-languages
          [skills]="user.skills"
          [languages]="user.languages"
        ></app-profile-skills-languages>
        <app-profile-portfolio
          [portfolio]="user.portfolio"
          [isOwner]="isOwner"
        ></app-profile-portfolio>
        <app-profile-reviews
          [reviews]="user.reviews || []"
          [isOwner]="isOwner"
          [profileUserId]="user.id"
          (reviewAdded)="onReviewAdded()"
        ></app-profile-reviews>
      </div>

      <div class="profile-sidebar-column">
        <app-profile-sidebar
          [hourlyRate]="user.hourly_rate"
          [isOwner]="isOwner"
        ></app-profile-sidebar>
      </div>
    </div>
  </div>

  <div class="profile-shell loading-state" *ngIf="loading">
    <p>Loading profile...</p>
  </div>
</div>
